@model ListStaffLeaveOnDashboardDto
<div class="modal fade" id="staffLeaveApprove" tabindex="-1" role="dialog" aria-labelledby="exampleModalSizeLg" aria-hidden="true">
    <form id="approveStaffLeave" method="post">
        <div class="modal-dialog modal-dialog-centered modal-lg p-5 " role="document">
            <div class="modal-content">
                <div class="modal-header" style="background-color:#181c32">
                    <div class="card-title align-items-start flex-column">
                        <h3 class="card-label font-weight-bolder text-light">
                            <i class="fas fa-address-book mr-2 text-light"></i>İzin Bilgisi
                        </h3>

                    </div>
                    <button type="button" class="link-2" data-dismiss="modal" aria-label="Close">
                    </button>
                </div>
                <div class="card text-center">
                    <div class="card-header" style="background-color:#181c32">
                        <h4 class="text-light">@Model.NameSurname <span class="text-warning"> @Model.LeaveType </span> talebinde bulunmuştur.</h4>
                    </div>
                    <div class="card-body" style="background-color:#181c32">
                        <h4 class="card-title text-light "> Tarih Aralığı :@Model.LeaveStartDate.ToShortDateString() - @Model.LeaveEndDate.ToShortDateString()  ( @Model.TotalDay gün ) </h4>
                        <p class="card-title "> <h4 class="text-light">Açıklama: @Model.Description </h4></p>
                        <div class="card-footer text-warning" style="background-color:#181c32">
                           
                            <h4 >Kalan Yıllık İzin Hakkı: @Model.TotalRemainingDay Gün</h4>
                        </div>
                    </div>


                </div>
                <div class="modal-footer" style="background-color:#181c32">
                    <button type="button" class="btn btn-light-primary font-weight-bold" data-dismiss="modal">Vazgeç</button>
                    <button type="button" onclick="approveLeaveDash(@Model.StaffLeaveId)"  class="btn btn-primary font-weight-bold">Onayla</button>
                </div>
            </div>
        </div>
    </form>
</div>

<script>
    function approveLeaveDash(id) {
            Swal.fire({
                title: "Onaylamak ister misiniz ?",
                text: "Bunu geri alamazsınız!",
                icon: "warning",
                showCancelButton: true,
                confirmButtonText: "Evet",
                cancelButtonText: "Hayır",
                reverseButtons: true
            }).then(function (result) {
                if (result.value) {
                    $.ajax({
                        method: "POST",
                        url: "/Leave/ApproveLeave/" + id,
                    }).done(function (result) {
                        debugger;
                        if (result == true) {
                            Swal.fire({
                                title: "Onaylandı!",
                                text: "Talep Onaylandı.",
                                icon: "success",
                                showCancelButton: false
                            }).then(function () {
                                window.location.reload();
                            })

                        } else {
                            Swal.fire(
                                "Hata",
                                "Kaydınız onaylanmadı",
                                "hata"
                            )
                        }

                    })
                } else if (result.dismiss === "cancel") {
                    Swal.fire({
                        title: "İptal Edildi",
                        text: "Kaydınız onaylanmadı",
                        icon: "error",
                        showCancelButton: false
                    })
                }
            });

        }
        function rejectLeave(id) {
            Swal.fire({
                title: "Talebi Reddetmek İster Misiniz ?",
                text: "Bunu geri alamazsınız!",
                icon: "warning",
                showCancelButton: true,
                confirmButtonText: "Evet",
                cancelButtonText: "Hayır",
                reverseButtons: true
            }).then(function (result) {
                if (result.value) {
                    $.ajax({
                        method: "POST",
                        url: "/Leave/RejectLeave/" + id,
                    }).done(function (result) {
                        debugger;
                        if (result == true) {
                            Swal.fire({
                                title: "Başarılı!",
                                text: "Talep Reddedildi.",
                                icon: "success",
                                showCancelButton: false
                            }).then(function () {
                                window.location.reload();
                            })

                        } else {
                            Swal.fire(
                                "Hata",
                                "İşlem Başarısız",
                                "hata"
                            )
                        }

                    })
                } else if (result.dismiss === "cancel") {
                    Swal.fire({
                        title: "İptal Edildi",
                        text: "Kaydınız onaylanmadı",
                        icon: "error",
                        showCancelButton: false
                    })
                }
            });

        }
</script>